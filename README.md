# CustomerSearchStat

___

## ВАЖНО

___
Подключение и работа с БД производилась через пользователя _**postgres**_ с паролем _**0000**_, а url подключение
_**jdbc:postgresql://127.0.0.1:5432/shop_db**_.
___

## Сборка проекта

Проект собирается с помощью команды _mvn package -f **"путь к pom.xml файлу"**_.
> _pom.xml_ находится в корневой директории проекта
___

## Восстановлеие БД

Для подключения БД следует:

1. Создать базу данных посредством команды _**create database shop_db encoding 'UTF-8';**_.
2. Востановить БД посредством команды _psql -U **postgres** -W shop_db < **"путь до дампа БД"**_.

> 1. Дамп БД находится в директории _**datasets**_ с именем _**shop_db.dump**_.
> 2. Если по какой-либо причине не удастся восстановить БД, в директории _**db**_ находится файл _**db.sql**_ с полным
     списком команд для восстановления БД.
___

## Запуск программы

1. После сборки, проект будет находиться в папке _**target**_ (в корневой директории) с названием _**
   CustomerSearchStat-1.0-SNAPSHOT-jar-with-dependencies.jar**_.
2. Запуск производится с помощью команды _**java -Dfile.encoding=UTF8 -jar
   CustomerSearchStat-1.0-SNAPSHOT-jar-with-dependencies.jar "запрос" "входной файл" "выходной файл"**_, где:
    1. _"запрос"_ - вид операции, какую хотим исполнить (_search_ или _stat_).
    2. _"входной файл"_ - путь к файлу, из которого будет считываться запрос.
    3. _"выходной файл"_ - путь к выходному файлу, в который будет записан результат работы программы (если файла не
       существует, он будет создан).

> _**-Dfile.encoding=UTF8**_ нужен для точного установления кодировки для JVM

___

## Тестирование

Для тестирования доступны файлы:

1. _**test1.json**_
2. _**test2.json**_
3. _**test3.json**_

Из директории _**datasets**_.